
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>BPMN Viewer - Informazioni a Comparsa</title>
  <script src="https://unpkg.com/bpmn-js@11.5.0/dist/bpmn-viewer.development.js"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      overflow: hidden;
    }
    #canvas {
      width: 100%;
      height: 100%;
      border: 1px solid #ccc;
      position: relative;
    }
    #infoBox {
      position: absolute;
      background: #fff;
      border: 1px solid #888;
      padding: 10px;
      box-shadow: 2px 2px 8px rgba(0,0,0,0.3);
      display: none;
      z-index: 10;
      max-width: 300px;
      font-family: Arial, sans-serif;
      font-size: 14px;
    }
  </style>
</head>
<body>
<div id="canvas"></div>
<div id="infoBox"></div>
<script>
const bpmnXML = "<?xml version='1.0' encoding='utf-8'?>\n<bpmn:definitions id=\"Definitions_1\" targetNamespace=\"http://example.bpmn\" xmlns:bpmn=\"http://www.omg.org/spec/BPMN/20100524/MODEL\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:bpmndi=\"http://www.omg.org/spec/BPMN/20100524/DI\" xmlns:omgdc=\"http://www.omg.org/spec/DD/20100524/DC\" xmlns:omgdi=\"http://www.omg.org/spec/DD/20100524/DI\">\n  <bpmn:process id=\"Process_1\" isExecutable=\"true\">\n    <bpmn:task id=\"A1\" name=\"Presentazione istanza ai sensi dell'articolo 23\" />\n    <bpmn:task id=\"A2\" name=\"Inclusione nell'avviso al pubblico delle autorizzazioni richieste e della documentazione necessaria\" />\n    <bpmn:task id=\"A3\" name=\"Procedere con il provvedimento unico senza le autorizzazioni escluse\" />\n    <bpmn:task id=\"A4\" name=\"Procedere con il provvedimento unico comprensivo di tutte le autorizzazioni\" />\n    <bpmn:task id=\"A5\" name=\"Verifica del pagamento del contributo\" />\n    <bpmn:task id=\"A6\" name=\"Comunicazione della pubblicazione della documentazione alle amministrazioni competenti\" />\n    <bpmn:task id=\"A7\" name=\"Verifica dell'adeguatezza e completezza della documentazione\" />\n    <bpmn:task id=\"A8\" name=\"Assegnazione di un termine per eventuali integrazioni\" />\n    <bpmn:task id=\"A9\" name=\"Presentazione delle integrazioni entro il termine assegnato\" />\n    <bpmn:task id=\"A10\" name=\"Procedere con la pubblicazione dell'avviso\" />\n    <bpmn:task id=\"A11\" name=\"Pubblicazione dell'avviso di cui all'articolo 23, comma 1, lettera e)\" />\n    <bpmn:task id=\"A12\" name=\"Informazione nell'albo pretorio informatico delle amministrazioni comunali\" />\n    <bpmn:task id=\"A13\" name=\"Presentazione di osservazioni entro sessanta giorni\" />\n    <bpmn:task id=\"A14\" name=\"Indizione della conferenza di servizi decisoria\" />\n    <bpmn:task id=\"A15\" name=\"Eventuali richieste di integrazioni al proponente\" />\n    <bpmn:task id=\"A16\" name=\"Pubblicazione delle integrazioni sul sito internet\" />\n    <bpmn:task id=\"A17\" name=\"Nuovo avviso al pubblico\" />\n    <bpmn:task id=\"A18\" name=\"L'istanza si intende ritirata\" />\n    <bpmn:task id=\"A19\" name=\"Partecipazione del proponente e delle amministrazioni competenti\" />\n    <bpmn:task id=\"A20\" name=\"Considerazione delle osservazioni raccolte\" />\n    <bpmn:task id=\"A21\" name=\"Determinazione motivata di conclusione della conferenza\" />\n    <bpmn:task id=\"A22\" name=\"Rilascio del provvedimento unico in materia ambientale\" />\n    <bpmn:task id=\"A23\" name=\"Rinnovo e riesame delle condizioni e misure supplementari\" />\n    <bpmn:exclusiveGateway id=\"C1\" name=\"Richiesta di esclusione di alcune autorizzazioni?\" />\n    <bpmn:exclusiveGateway id=\"C2\" name=\"Sono richieste integrazioni?\" />\n    <bpmn:exclusiveGateway id=\"C3\" name=\"Il proponente presenta la documentazione integrativa?\" />\n    <bpmn:endEvent id=\"EndEvent_23588087\" name=\"End\" />\n    <bpmn:endEvent id=\"EndEvent_dc1691fa\" name=\"End\" />\n    <bpmn:exclusiveGateway id=\"J_0a16fa9d\" />\n    <bpmn:exclusiveGateway id=\"J_f7874715\" />\n    <bpmn:sequenceFlow id=\"A1_A2\" sourceRef=\"A1\" targetRef=\"A2\" />\n    <bpmn:sequenceFlow id=\"A2_C1\" sourceRef=\"A2\" targetRef=\"C1\" />\n    <bpmn:sequenceFlow id=\"C1_A3\" sourceRef=\"C1\" targetRef=\"A3\" name=\"sì\" />\n    <bpmn:sequenceFlow id=\"C1_A4\" sourceRef=\"C1\" targetRef=\"A4\" name=\"no\" />\n    <bpmn:sequenceFlow id=\"A3_J_0a16fa9d\" sourceRef=\"A3\" targetRef=\"J_0a16fa9d\" />\n    <bpmn:sequenceFlow id=\"A4_J_0a16fa9d\" sourceRef=\"A4\" targetRef=\"J_0a16fa9d\" />\n    <bpmn:sequenceFlow id=\"J_0a16fa9d_A5\" sourceRef=\"J_0a16fa9d\" targetRef=\"A5\" />\n    <bpmn:sequenceFlow id=\"A5_A6\" sourceRef=\"A5\" targetRef=\"A6\" />\n    <bpmn:sequenceFlow id=\"A6_A7\" sourceRef=\"A6\" targetRef=\"A7\" />\n    <bpmn:sequenceFlow id=\"A7_A8\" sourceRef=\"A7\" targetRef=\"A8\" />\n    <bpmn:sequenceFlow id=\"A8_C2\" sourceRef=\"A8\" targetRef=\"C2\" />\n    <bpmn:sequenceFlow id=\"C2_A9\" sourceRef=\"C2\" targetRef=\"A9\" name=\"sì\" />\n    <bpmn:sequenceFlow id=\"C2_A10\" sourceRef=\"C2\" targetRef=\"A10\" name=\"no\" />\n    <bpmn:sequenceFlow id=\"A9_J_f7874715\" sourceRef=\"A9\" targetRef=\"J_f7874715\" />\n    <bpmn:sequenceFlow id=\"A10_J_f7874715\" sourceRef=\"A10\" targetRef=\"J_f7874715\" />\n    <bpmn:sequenceFlow id=\"J_f7874715_A11\" sourceRef=\"J_f7874715\" targetRef=\"A11\" />\n    <bpmn:sequenceFlow id=\"A11_A12\" sourceRef=\"A11\" targetRef=\"A12\" />\n    <bpmn:sequenceFlow id=\"A12_A13\" sourceRef=\"A12\" targetRef=\"A13\" />\n    <bpmn:sequenceFlow id=\"A13_A14\" sourceRef=\"A13\" targetRef=\"A14\" />\n    <bpmn:sequenceFlow id=\"A14_A15\" sourceRef=\"A14\" targetRef=\"A15\" />\n    <bpmn:sequenceFlow id=\"A15_C3\" sourceRef=\"A15\" targetRef=\"C3\" />\n    <bpmn:sequenceFlow id=\"C3_A16\" sourceRef=\"C3\" targetRef=\"A16\" name=\"sì\" />\n    <bpmn:sequenceFlow id=\"C3_A18\" sourceRef=\"C3\" targetRef=\"A18\" name=\"no\" />\n    <bpmn:sequenceFlow id=\"A16_A17\" sourceRef=\"A16\" targetRef=\"A17\" />\n    <bpmn:sequenceFlow id=\"A17_A19\" sourceRef=\"A17\" targetRef=\"A19\" />\n    <bpmn:sequenceFlow id=\"A18_EndEvent_23588087\" sourceRef=\"A18\" targetRef=\"EndEvent_23588087\" />\n    <bpmn:sequenceFlow id=\"A19_A20\" sourceRef=\"A19\" targetRef=\"A20\" />\n    <bpmn:sequenceFlow id=\"A20_A21\" sourceRef=\"A20\" targetRef=\"A21\" />\n    <bpmn:sequenceFlow id=\"A21_A22\" sourceRef=\"A21\" targetRef=\"A22\" />\n    <bpmn:sequenceFlow id=\"A22_A23\" sourceRef=\"A22\" targetRef=\"A23\" />\n    <bpmn:sequenceFlow id=\"A23_EndEvent_dc1691fa\" sourceRef=\"A23\" targetRef=\"EndEvent_dc1691fa\" />\n    <bpmn:startEvent id=\"StartEvent_14e90a5b\" name=\"Start 1\" />\n  </bpmn:process>\n  <bpmndi:BPMNDiagram id=\"BPMNDiagram_1\">\n    <bpmndi:BPMNPlane id=\"BPMNPlane_1\" bpmnElement=\"Process_1\">\n      <bpmndi:BPMNShape id=\"A1_di\" bpmnElement=\"A1\">\n        <omgdc:Bounds x=\"200\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A2_di\" bpmnElement=\"A2\">\n        <omgdc:Bounds x=\"400\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A3_di\" bpmnElement=\"A3\">\n        <omgdc:Bounds x=\"800\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A4_di\" bpmnElement=\"A4\">\n        <omgdc:Bounds x=\"800\" y=\"150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A5_di\" bpmnElement=\"A5\">\n        <omgdc:Bounds x=\"1200\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A6_di\" bpmnElement=\"A6\">\n        <omgdc:Bounds x=\"1400\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A7_di\" bpmnElement=\"A7\">\n        <omgdc:Bounds x=\"1600\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A8_di\" bpmnElement=\"A8\">\n        <omgdc:Bounds x=\"1800\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A9_di\" bpmnElement=\"A9\">\n        <omgdc:Bounds x=\"2200\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A10_di\" bpmnElement=\"A10\">\n        <omgdc:Bounds x=\"2200\" y=\"150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A11_di\" bpmnElement=\"A11\">\n        <omgdc:Bounds x=\"2600\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A12_di\" bpmnElement=\"A12\">\n        <omgdc:Bounds x=\"2800\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A13_di\" bpmnElement=\"A13\">\n        <omgdc:Bounds x=\"3000\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A14_di\" bpmnElement=\"A14\">\n        <omgdc:Bounds x=\"3200\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A15_di\" bpmnElement=\"A15\">\n        <omgdc:Bounds x=\"3400\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A16_di\" bpmnElement=\"A16\">\n        <omgdc:Bounds x=\"3800\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A17_di\" bpmnElement=\"A17\">\n        <omgdc:Bounds x=\"4000\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A18_di\" bpmnElement=\"A18\">\n        <omgdc:Bounds x=\"3800\" y=\"150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A19_di\" bpmnElement=\"A19\">\n        <omgdc:Bounds x=\"4200\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A20_di\" bpmnElement=\"A20\">\n        <omgdc:Bounds x=\"4400\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A21_di\" bpmnElement=\"A21\">\n        <omgdc:Bounds x=\"4600\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A22_di\" bpmnElement=\"A22\">\n        <omgdc:Bounds x=\"4800\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"A23_di\" bpmnElement=\"A23\">\n        <omgdc:Bounds x=\"5000\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"C1_di\" bpmnElement=\"C1\">\n        <omgdc:Bounds x=\"600\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"C2_di\" bpmnElement=\"C2\">\n        <omgdc:Bounds x=\"2000\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"C3_di\" bpmnElement=\"C3\">\n        <omgdc:Bounds x=\"3600\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"EndEvent_23588087_di\" bpmnElement=\"EndEvent_23588087\">\n        <omgdc:Bounds x=\"4000\" y=\"150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"EndEvent_dc1691fa_di\" bpmnElement=\"EndEvent_dc1691fa\">\n        <omgdc:Bounds x=\"5200\" y=\"-150\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A1_di\" bpmnElement=\"Annotation_A1\">\n        <omgdc:Bounds x=\"200\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A2_di\" bpmnElement=\"Annotation_A2\">\n        <omgdc:Bounds x=\"400\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A3_di\" bpmnElement=\"Annotation_A3\">\n        <omgdc:Bounds x=\"800\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A4_di\" bpmnElement=\"Annotation_A4\">\n        <omgdc:Bounds x=\"800\" y=\"250\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A5_di\" bpmnElement=\"Annotation_A5\">\n        <omgdc:Bounds x=\"1200\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A6_di\" bpmnElement=\"Annotation_A6\">\n        <omgdc:Bounds x=\"1400\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A7_di\" bpmnElement=\"Annotation_A7\">\n        <omgdc:Bounds x=\"1600\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A8_di\" bpmnElement=\"Annotation_A8\">\n        <omgdc:Bounds x=\"1800\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A9_di\" bpmnElement=\"Annotation_A9\">\n        <omgdc:Bounds x=\"2200\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A10_di\" bpmnElement=\"Annotation_A10\">\n        <omgdc:Bounds x=\"2200\" y=\"250\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A11_di\" bpmnElement=\"Annotation_A11\">\n        <omgdc:Bounds x=\"2600\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A12_di\" bpmnElement=\"Annotation_A12\">\n        <omgdc:Bounds x=\"2800\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A13_di\" bpmnElement=\"Annotation_A13\">\n        <omgdc:Bounds x=\"3000\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A14_di\" bpmnElement=\"Annotation_A14\">\n        <omgdc:Bounds x=\"3200\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A15_di\" bpmnElement=\"Annotation_A15\">\n        <omgdc:Bounds x=\"3400\" y=\"100\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A16_di\" bpmnElement=\"Annotation_A16\">\n        <omgdc:Bounds x=\"3800\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A17_di\" bpmnElement=\"Annotation_A17\">\n        <omgdc:Bounds x=\"4000\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A18_di\" bpmnElement=\"Annotation_A18\">\n        <omgdc:Bounds x=\"3800\" y=\"250\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A19_di\" bpmnElement=\"Annotation_A19\">\n        <omgdc:Bounds x=\"4200\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A20_di\" bpmnElement=\"Annotation_A20\">\n        <omgdc:Bounds x=\"4400\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A21_di\" bpmnElement=\"Annotation_A21\">\n        <omgdc:Bounds x=\"4600\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A22_di\" bpmnElement=\"Annotation_A22\">\n        <omgdc:Bounds x=\"4800\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"Annotation_A23_di\" bpmnElement=\"Annotation_A23\">\n        <omgdc:Bounds x=\"5000\" y=\"-50\" width=\"160\" height=\"35\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"J_0a16fa9d_di\" bpmnElement=\"J_0a16fa9d\">\n        <omgdc:Bounds x=\"1000\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"J_f7874715_di\" bpmnElement=\"J_f7874715\">\n        <omgdc:Bounds x=\"2400\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNShape id=\"StartEvent_14e90a5b_di\" bpmnElement=\"StartEvent_14e90a5b\">\n        <omgdc:Bounds x=\"0\" y=\"0\" width=\"120\" height=\"120\" />\n      </bpmndi:BPMNShape>\n      <bpmndi:BPMNEdge id=\"A1_A2_di\" bpmnElement=\"A1_A2\">\n        <omgdi:waypoint x=\"320\" y=\"60.0\" />\n        <omgdi:waypoint x=\"400\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A2_C1_di\" bpmnElement=\"A2_C1\">\n        <omgdi:waypoint x=\"520\" y=\"60.0\" />\n        <omgdi:waypoint x=\"600\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"C1_A3_di\" bpmnElement=\"C1_A3\">\n        <omgdi:waypoint x=\"720\" y=\"60.0\" />\n        <omgdi:waypoint x=\"800\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"C1_A4_di\" bpmnElement=\"C1_A4\">\n        <omgdi:waypoint x=\"720\" y=\"60.0\" />\n        <omgdi:waypoint x=\"800\" y=\"210.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A3_J_0a16fa9d_di\" bpmnElement=\"A3_J_0a16fa9d\">\n        <omgdi:waypoint x=\"920\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"1000\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A4_J_0a16fa9d_di\" bpmnElement=\"A4_J_0a16fa9d\">\n        <omgdi:waypoint x=\"920\" y=\"210.0\" />\n        <omgdi:waypoint x=\"1000\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"J_0a16fa9d_A5_di\" bpmnElement=\"J_0a16fa9d_A5\">\n        <omgdi:waypoint x=\"1120\" y=\"60.0\" />\n        <omgdi:waypoint x=\"1200\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A5_A6_di\" bpmnElement=\"A5_A6\">\n        <omgdi:waypoint x=\"1320\" y=\"60.0\" />\n        <omgdi:waypoint x=\"1400\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A6_A7_di\" bpmnElement=\"A6_A7\">\n        <omgdi:waypoint x=\"1520\" y=\"60.0\" />\n        <omgdi:waypoint x=\"1600\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A7_A8_di\" bpmnElement=\"A7_A8\">\n        <omgdi:waypoint x=\"1720\" y=\"60.0\" />\n        <omgdi:waypoint x=\"1800\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A8_C2_di\" bpmnElement=\"A8_C2\">\n        <omgdi:waypoint x=\"1920\" y=\"60.0\" />\n        <omgdi:waypoint x=\"2000\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"C2_A9_di\" bpmnElement=\"C2_A9\">\n        <omgdi:waypoint x=\"2120\" y=\"60.0\" />\n        <omgdi:waypoint x=\"2200\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"C2_A10_di\" bpmnElement=\"C2_A10\">\n        <omgdi:waypoint x=\"2120\" y=\"60.0\" />\n        <omgdi:waypoint x=\"2200\" y=\"210.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A9_J_f7874715_di\" bpmnElement=\"A9_J_f7874715\">\n        <omgdi:waypoint x=\"2320\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"2400\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A10_J_f7874715_di\" bpmnElement=\"A10_J_f7874715\">\n        <omgdi:waypoint x=\"2320\" y=\"210.0\" />\n        <omgdi:waypoint x=\"2400\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"J_f7874715_A11_di\" bpmnElement=\"J_f7874715_A11\">\n        <omgdi:waypoint x=\"2520\" y=\"60.0\" />\n        <omgdi:waypoint x=\"2600\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A11_A12_di\" bpmnElement=\"A11_A12\">\n        <omgdi:waypoint x=\"2720\" y=\"60.0\" />\n        <omgdi:waypoint x=\"2800\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A12_A13_di\" bpmnElement=\"A12_A13\">\n        <omgdi:waypoint x=\"2920\" y=\"60.0\" />\n        <omgdi:waypoint x=\"3000\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A13_A14_di\" bpmnElement=\"A13_A14\">\n        <omgdi:waypoint x=\"3120\" y=\"60.0\" />\n        <omgdi:waypoint x=\"3200\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A14_A15_di\" bpmnElement=\"A14_A15\">\n        <omgdi:waypoint x=\"3320\" y=\"60.0\" />\n        <omgdi:waypoint x=\"3400\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A15_C3_di\" bpmnElement=\"A15_C3\">\n        <omgdi:waypoint x=\"3520\" y=\"60.0\" />\n        <omgdi:waypoint x=\"3600\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"C3_A16_di\" bpmnElement=\"C3_A16\">\n        <omgdi:waypoint x=\"3720\" y=\"60.0\" />\n        <omgdi:waypoint x=\"3800\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"C3_A18_di\" bpmnElement=\"C3_A18\">\n        <omgdi:waypoint x=\"3720\" y=\"60.0\" />\n        <omgdi:waypoint x=\"3800\" y=\"210.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A16_A17_di\" bpmnElement=\"A16_A17\">\n        <omgdi:waypoint x=\"3920\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"4000\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A17_A19_di\" bpmnElement=\"A17_A19\">\n        <omgdi:waypoint x=\"4120\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"4200\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A18_EndEvent_23588087_di\" bpmnElement=\"A18_EndEvent_23588087\">\n        <omgdi:waypoint x=\"3920\" y=\"210.0\" />\n        <omgdi:waypoint x=\"4000\" y=\"210.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A19_A20_di\" bpmnElement=\"A19_A20\">\n        <omgdi:waypoint x=\"4320\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"4400\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A20_A21_di\" bpmnElement=\"A20_A21\">\n        <omgdi:waypoint x=\"4520\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"4600\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A21_A22_di\" bpmnElement=\"A21_A22\">\n        <omgdi:waypoint x=\"4720\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"4800\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A22_A23_di\" bpmnElement=\"A22_A23\">\n        <omgdi:waypoint x=\"4920\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"5000\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"A23_EndEvent_dc1691fa_di\" bpmnElement=\"A23_EndEvent_dc1691fa\">\n        <omgdi:waypoint x=\"5120\" y=\"-90.0\" />\n        <omgdi:waypoint x=\"5200\" y=\"-90.0\" />\n      </bpmndi:BPMNEdge>\n      <bpmndi:BPMNEdge id=\"StartEvent_14e90a5b_A1_di\" bpmnElement=\"StartEvent_14e90a5b_A1\">\n        <omgdi:waypoint x=\"120\" y=\"60.0\" />\n        <omgdi:waypoint x=\"200\" y=\"60.0\" />\n      </bpmndi:BPMNEdge>\n    </bpmndi:BPMNPlane>\n  </bpmndi:BPMNDiagram>\n</bpmn:definitions>";
const viewer = new BpmnJS({ 
  container: '#canvas'
});
const taskInfo = {"A1": "ID: A1<br>Descrizione: Il proponente presenta un'istanza per richiedere il provvedimento unico comprensivo delle autorizzazioni ambientali.<br>Destinatario: Autorità competente<br>Riferimento Normativo: Art. 27, comma 1<br>Output: Istanza presentata<br>Documenti: Documentazione e elaborati progettuali", "A2": "ID: A2<br>Descrizione: Il proponente include nell'avviso al pubblico le autorizzazioni richieste e la documentazione necessaria per il provvedimento unico.<br>Destinatario: Pubblico<br>Riferimento Normativo: Art. 27, comma 1<br>Output: Avviso al pubblico con autorizzazioni e documentazione", "A3": "ID: A3<br>Descrizione: L'autorità competente procede con il provvedimento unico escludendo le autorizzazioni non richieste dal proponente.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 2<br>Output: Provvedimento unico senza autorizzazioni escluse", "A4": "ID: A4<br>Descrizione: L'autorità competente procede con il provvedimento unico comprensivo di tutte le autorizzazioni richieste.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 1<br>Output: Provvedimento unico con tutte le autorizzazioni", "A5": "ID: A5<br>Descrizione: L'autorità competente verifica l'avvenuto pagamento del contributo dovuto dal proponente.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 4<br>Output: Conferma del pagamento del contributo<br>Riferimento Temporale: Entro 10 giorni dalla presentazione dell'istanza", "A6": "ID: A6<br>Descrizione: L'autorità competente comunica alle amministrazioni competenti la pubblicazione della documentazione sul proprio sito web.<br>Destinatario: Amministrazioni competenti<br>Riferimento Normativo: Art. 27, comma 4<br>Output: Comunicazione inviata<br>Riferimento Temporale: Entro 10 giorni dalla presentazione dell'istanza", "A7": "ID: A7<br>Descrizione: L'autorità competente verifica l'adeguatezza e la completezza della documentazione presentata dal proponente.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 5<br>Output: Esito della verifica documentale<br>Riferimento Temporale: Entro 30 giorni dalla pubblicazione della documentazione", "A8": "ID: A8<br>Descrizione: L'autorità competente assegna al proponente un termine perentorio per eventuali integrazioni documentali.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 5<br>Output: Termine per integrazioni assegnato<br>Riferimento Temporale: Termine non superiore a 30 giorni", "A9": "ID: A9<br>Descrizione: Il proponente presenta le integrazioni documentali richieste entro il termine assegnato dall'autorità competente.<br>Destinatario: Autorità competente<br>Riferimento Normativo: Art. 27, comma 5<br>Output: Integrazioni presentate<br>Documenti: Integrazioni documentali<br>Riferimento Temporale: Entro il termine assegnato", "A10": "ID: A10<br>Descrizione: L'autorità competente procede con la pubblicazione dell'avviso relativo alla documentazione integrata.<br>Destinatario: Pubblico<br>Riferimento Normativo: Art. 27, comma 6<br>Output: Avviso pubblicato<br>Riferimento Temporale: Entro 10 giorni dalla verifica della completezza documentale", "A11": "ID: A11<br>Descrizione: L'autorità competente pubblica l'avviso di cui all'articolo 23, comma 1, lettera e), relativo alla documentazione integrata.<br>Destinatario: Pubblico<br>Riferimento Normativo: Art. 27, comma 6<br>Output: Avviso pubblicato<br>Riferimento Temporale: Entro 10 giorni dalla verifica della completezza documentale", "A12": "ID: A12<br>Descrizione: L'autorità competente informa le amministrazioni comunali della pubblicazione dell'avviso nell'albo pretorio informatico.<br>Destinatario: Amministrazioni comunali<br>Riferimento Normativo: Art. 27, comma 6<br>Output: Informazione pubblicata", "A13": "ID: A13<br>Descrizione: Il pubblico interessato presenta osservazioni sulla documentazione pubblicata entro sessanta giorni.<br>Destinatario: Autorità competente<br>Riferimento Normativo: Art. 27, comma 6<br>Output: Osservazioni presentate<br>Documenti: Osservazioni del pubblico<br>Riferimento Temporale: Entro 60 giorni dalla pubblicazione", "A14": "ID: A14<br>Descrizione: L'autorità competente indice la conferenza di servizi decisoria per discutere il provvedimento unico.<br>Destinatario: Amministrazioni competenti e proponente<br>Riferimento Normativo: Art. 27, comma 7<br>Output: Conferenza di servizi indetta<br>Riferimento Temporale: Entro 15 giorni dalla scadenza del termine per le osservazioni", "A15": "ID: A15<br>Descrizione: L'autorità competente può richiedere al proponente eventuali integrazioni documentali durante la conferenza di servizi.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 7<br>Output: Richiesta di integrazioni inviata<br>Riferimento Temporale: Termine perentorio non superiore a 15 giorni", "A16": "ID: A16<br>Descrizione: L'autorità competente pubblica le integrazioni documentali sul proprio sito internet.<br>Destinatario: Pubblico<br>Riferimento Normativo: Art. 27, comma 7<br>Output: Integrazioni pubblicate<br>Documenti: Integrazioni documentali<br>Riferimento Temporale: Entro 5 giorni dalla ricezione delle integrazioni", "A17": "ID: A17<br>Descrizione: L'autorità competente emette un nuovo avviso al pubblico in seguito alle integrazioni ricevute.<br>Destinatario: Pubblico<br>Riferimento Normativo: Art. 27, comma 7<br>Output: Nuovo avviso pubblicato<br>Riferimento Temporale: Entro 10 giorni dalla pubblicazione delle integrazioni", "A18": "ID: A18<br>Descrizione: Se il proponente non presenta le integrazioni entro il termine, l'istanza si intende ritirata.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 7<br>Output: Istanza ritirata<br>Riferimento Temporale: Alla scadenza del termine per le integrazioni", "A19": "ID: A19<br>Descrizione: Il proponente e le amministrazioni competenti partecipano alla conferenza di servizi.<br>Destinatario: Proponente e amministrazioni competenti<br>Riferimento Normativo: Art. 27, comma 8<br>Output: Partecipazione alla conferenza di servizi<br>Riferimento Temporale: Durante la conferenza di servizi", "A20": "ID: A20<br>Descrizione: L'autorità competente considera le osservazioni raccolte durante la consultazione pubblica.<br>Destinatario: Proponente e amministrazioni competenti<br>Riferimento Normativo: Art. 27, comma 8<br>Output: Osservazioni considerate<br>Documenti: Osservazioni del pubblico<br>Riferimento Temporale: Durante la conferenza di servizi", "A21": "ID: A21<br>Descrizione: L'autorità competente emette la determinazione motivata di conclusione della conferenza di servizi.<br>Destinatario: Proponente e amministrazioni competenti<br>Riferimento Normativo: Art. 27, comma 8<br>Output: Determinazione motivata emessa<br>Riferimento Temporale: Entro 210 giorni dalla convocazione della conferenza", "A22": "ID: A22<br>Descrizione: L'autorità competente rilascia il provvedimento unico in materia ambientale.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 8<br>Output: Provvedimento unico rilasciato<br>Documenti: Provvedimento unico<br>Riferimento Temporale: Entro 210 giorni dalla convocazione della conferenza", "A23": "ID: A23<br>Descrizione: L'autorità competente rinnova e riesamina le condizioni e misure supplementari relative ai titoli abilitativi.<br>Destinatario: Proponente<br>Riferimento Normativo: Art. 27, comma 9<br>Output: Condizioni e misure rinnovate e riesaminate"};

viewer.importXML(bpmnXML).then(() => {
  viewer.get('canvas').zoom('fit-viewport');
  
  const eventBus = viewer.get('eventBus');
  const canvasContainer = document.getElementById('canvas');
  const infoBox = document.getElementById('infoBox');
  const canvas = viewer.get('canvas');
  
  let isDragging = false;
  let lastX = 0;
  let lastY = 0;
  
  canvasContainer.addEventListener('mousedown', function(event) {
    if (event.button === 0) {
      isDragging = true;
      lastX = event.clientX;
      lastY = event.clientY;
      canvasContainer.style.cursor = 'grabbing';
      event.preventDefault();
    }
  });
  
  canvasContainer.addEventListener('mousemove', function(event) {
    if (isDragging) {
      const deltaX = event.clientX - lastX;
      const deltaY = event.clientY - lastY;
      
      const viewbox = canvas.viewbox();
      canvas.viewbox({
        x: viewbox.x - deltaX,
        y: viewbox.y - deltaY,
        width: viewbox.width,
        height: viewbox.height
      });
      
      lastX = event.clientX;
      lastY = event.clientY;
    }
  });
  
  canvasContainer.addEventListener('mouseup', function() {
    isDragging = false;
    canvasContainer.style.cursor = 'grab';
  });
  
  canvasContainer.addEventListener('mouseleave', function() {
    isDragging = false;
    canvasContainer.style.cursor = 'grab';
  });
  
  canvasContainer.style.cursor = 'grab';
  
  eventBus.on('element.dblclick', function(event) {
    const element = event.element;
    if (element.type === 'bpmn:Task') {
      const info = taskInfo[element.id] || "Nessuna informazione disponibile.";
      const rect = canvasContainer.getBoundingClientRect();
      const x = event.originalEvent.clientX - rect.left;
      const y = event.originalEvent.clientY - rect.top;
      infoBox.style.left = x + 'px';
      infoBox.style.top = y + 'px';
      infoBox.innerHTML = `<strong>${element.businessObject.name}</strong><br>${info}`;
      infoBox.style.display = 'block';
    }
  });
  
  canvasContainer.addEventListener('click', () => {
    infoBox.style.display = 'none';
  });
  
}).catch(err => {
  console.error('Errore nel caricamento del diagramma', err);
});
</script>
</body>
</html>
